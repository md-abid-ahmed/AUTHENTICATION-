import React, { useState } from 'react';
import Weekly from './Weekly';
import './Monthly.css';

function Monthly() {
  const [weeksData, setWeeksData] = useState([
    { id: 1, data: {} },
    { id: 2, data: {} },
    { id: 3, data: {} },
    { id: 4, data: {} },
  ]);

  const [selectedFromWeek, setSelectedFromWeek] = useState('');

  const copyWeek = (fromWeekIndex, toWeekIndex) => {
    setWeeksData((prevWeeksData) => {
      const newWeeksData = [...prevWeeksData];
      newWeeksData[toWeekIndex].data = { ...newWeeksData[fromWeekIndex].data };
      return newWeeksData;
    });
  };

  return (
    <div className="monthly-container">
      {weeksData.map((week, index) => (
        <div key={week.id} className="weekly-container">
          <Weekly
            weekData={week.data}
            setWeekData={(newData) => {
              setWeeksData((prevWeeksData) => {
                const newWeeksData = [...prevWeeksData];
                newWeeksData[index].data = newData;
                return newWeeksData;
              });
            }}
          />
          <div className="copy-controls">
            <select
              value={selectedFromWeek}
              onChange={(e) => setSelectedFromWeek(parseInt(e.target.value))}
            >
              <option value="">Select Week to Copy From</option>
              {weeksData.map((_, fromIndex) => (
                <option key={fromIndex} value={fromIndex}>
                  Week {fromIndex + 1}
                </option>
              ))}
            </select>
            <button
              onClick={() => {
                if (selectedFromWeek !== '' && selectedFromWeek !== index) {
                  copyWeek(selectedFromWeek, index);
                } else {
                  alert('Please select a valid week to copy from.');
                }
              }}
            >
              Copy Week
            </button>
          </div>
        </div>
      ))}
    </div>
  );
}

export default Monthly;
